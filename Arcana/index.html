<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Arcana IDE</title>
    <link href="https://cdn.jsdelivr.net/npm/remixicon@2.5.0/fonts/remixicon.css" rel="stylesheet">
    <link rel="stylesheet" href="style.css">
</head>
<body>
    <div class="ide-container">
        <main class="workspace">
            <div class="activity-bar">
                <div class="action-icon active" id="guide-icon" title="Arcana Guide"><i class="ri-book-open-line"></i></div>
                <div class="action-icon" id="run-icon" title="Run Arcana Script"><i class="ri-play-line"></i></div>
                <div class="action-icon" title="Settings"><i class="ri-settings-3-line"></i></div>
            </div>

            <div class="sidebar" id="sidebar">
                <div class="sidebar-header">ARCANA LANGUAGE GUIDE</div>
                <div class="language-guide">
<section>
  <h2>Arcana란 무엇인가 — 읽히는 주문, 동작하는 코드</h2>
  <p><b>Arcana</b>는 “소리 내어 읽어도 이해되는 코드”를 지향합니다. 문장은 <code>ok?</code>로 또렷하게 끝나고, 블록은 <code>conclude</code>로 의식을 닫습니다.
     핵심은 <b>가독성</b>과 <b>개성</b>의 균형: 과하게 상징적이지 않되, 말맛이 살아 있어야 합니다.</p>
  <p><b>문장의 형태</b>는 크게 네 부분입니다: <i>대상</i> → <i>동사(키워드)</i> → <i>보어</i> → <i>마침표</i>(<code>ok?</code>).<br>
     예) <code>hp is 30 ok?</code> (대상 <i>hp</i>에 값을 <i>is</i>로 선언/할당, <i>ok?</i>로 마침)</p>
</section>

<section>
  <h3>1) 값과 변수 — 이름 붙인 사실들</h3>
  <p><b>타입</b>: <code>Number</code>(정수/실수), <code>String</code>(쌍따옴표), <code>Boolean</code>(<code>truth</code>/<code>lie</code>). 현재 스코프는 전역 하나입니다.</p>
  <ul>
    <li><b>선언</b>: <code>X is Y ok?</code> — 변수 <code>X</code>를 만들고 <code>Y</code>로 초기화.</li>
    <li><b>대입</b>: <code>Set X to Y ok?</code> — 이미 존재하는 <code>X</code>의 값을 <code>Y</code>로 변경. 존재하지 않으면 에러.</li>
  </ul>
  <details><summary>예시 보기</summary>
  <pre><code class="code-snippet">name is "Luna" ok?
hp is 30 ok?
Set hp to hp - 5 ok?</code></pre>
  </details>
  <p><b>이름 짓기</b>: 영문/밑줄로 시작하는 식별자를 권장합니다. 키워드(예: <code>when</code>, <code>is</code>)는 이름으로 쓰지 마세요.</p>
</section>

<section>
  <h3>2) 표현식 — 계산은 간결하게</h3>
  <p>사칙(<code>+ - * /</code>), 단항 <code>-</code>, 괄호 <code>( )</code>를 지원합니다. 우선순위는 일반 수학과 동일합니다.</p>
  <details><summary>예시 보기</summary>
  <pre><code class="code-snippet">a is 1 + 2 * (3 + 4) ok?
b is -5 + 10 / 2 ok?</code></pre>
  </details>
  <p><b>비교</b>: <code>is</code>, <code>is not</code>, <code>is greater/less than</code>, <code>is at least/at most</code>, <code>is between A and B</code>.<br>
     <b>논리</b>: <code>not</code> &gt; <code>and</code> &gt; <code>or</code> (우선순위). 괄호로 묶어 의도를 드러내세요.</p>
</section>

<section>
  <h3>3) 출력과 보간 — 말처럼 보여주기</h3>
  <h4>Reveal</h4>
  <p>콘솔에 메시지를 출력합니다. Arcana의 문체를 살리려면 문장은 한국어, 키워드는 영어로 섞는 것을 권장합니다.</p>
  <pre><code class="code-snippet">Reveal: "게임 시작!" ok?</code></pre>
  <h4>Magic Ink <code>{| ... |}</code></h4>
  <p>문자열 안에서 <b>변수</b>를 보간합니다. (현재 버전은 <i>표현식 보간</i>이 아닌 <i>변수 이름</i>만 지원)</p>
  <details><summary>예시 보기</summary>
  <pre><code class="code-snippet">name is "Aiden" ok?
Reveal: "나는 {| name |}." ok?</code></pre>
  </details>
</section>

<section>
  <h3>4) 입력 — 조용히 청취하라</h3>
  <p><code>Listen</code>은 사용자로부터 값을 받습니다. 문자열/숫자 입력을 모두 지원하며, 숫자 모드에서 숫자가 아니면 에러가 납니다.</p>
  <ul>
    <li><code>Listen name ok?</code> — 기본 프롬프트로 문자열 입력</li>
    <li><code>Listen "이름을 말하라." into name ok?</code> — 맞춤 프롬프트</li>
    <li><code>Listen number into level ok?</code> — 숫자만 허용</li>
  </ul>
</section>

<section>
  <h3>5) 분기 — 읽히는 조건문</h3>
  <p><code>when</code>으로 시작하고, 필요하면 <code>otherwise when</code>으로 이어가며, 마지막에 <code>otherwise</code>를 둘 수 있습니다. 블록은 <code>conclude</code>로 닫습니다.</p>
  <details><summary>읽는 순서와 규칙</summary>
    <ol>
      <li>위에서 아래로 첫 번째 참인 가지를 실행합니다.</li>
      <li><code>not</code> → <code>and</code> → <code>or</code> 순으로 결합합니다.</li>
      <li><code>is between A and B</code>는 <b>포함 범위</b>(A ≤ x ≤ B)입니다.</li>
    </ol>
  </details>
  <pre><code class="code-snippet">when score is at least 90:
  Reveal: "A" ok?
otherwise when score is at least 80:
  Reveal: "B" ok?
otherwise:
  Reveal: "C 이하" ok?
conclude</code></pre>
</section>

<section>
  <h3>6) 반복 — 의식의 리듬</h3>
  <h4>Repeat N times</h4>
  <p>고정 횟수만큼 반복합니다.</p>
  <pre><code class="code-snippet">repeat 3 times:
  Reveal: "叩" ok?
conclude</code></pre>
  <h4>As long as</h4>
  <p>조건이 참인 동안 반복합니다. 무한 루프 방지를 위해 내부적으로 상한(안전장치)이 있습니다.</p>
  <pre><code class="code-snippet">mana is 3 ok?
as long as mana is greater than 0:
  Reveal: "cast!" ok?
  Set mana to mana - 1 ok?
conclude</code></pre>
  <h4>For each</h4>
  <p>문자열(또는 배열)을 순회합니다. 각 요소가 변수에 들어가 블록 안에서 사용됩니다.</p>
  <pre><code class="code-snippet">for each ch in "OK":
  Reveal: ch ok?
conclude</code></pre>
</section>

<section>
  <h3>7) 유틸리티 — 안전·시간·우연</h3>
  <h4>Ensure</h4>
  <p>전제조건을 선언합니다. 거짓이면 즉시 오류를 발생시키고 실행을 멈춥니다.</p>
  <pre><code class="code-snippet">Ensure hp is at least 0 ok?</code></pre>
  <h4>Wait</h4>
  <p>잠깐 멈춥니다. <code>ms/milliseconds/seconds</code> 단위를 지원합니다.</p>
  <pre><code class="code-snippet">Wait for 0.5 seconds ok?
Wait for 300 ms ok?</code></pre>
  <h4>Draw</h4>
  <p>우연을 뽑습니다. 균등 분포로 선택됩니다.</p>
  <pre><code class="code-snippet">Draw number between 1 and 6 into roll ok?
Draw from "red", "blue", "gold" into color ok?</code></pre>
</section>

<section>
  <h3>8) 오류와 디버깅 — 실패도 읽기 좋게</h3>
  <ul>
    <li><b>라인 번호 포함</b>: 오류 메시지에는 문제가 된 줄이 함께 표시됩니다.</li>
    <li><b>흔한 오류</b>: <code>ok?</code> 누락, <code>conclude</code> 누락, 존재하지 않는 변수에 <code>Set</code>, 잘못된 숫자 입력 등.</li>
    <li><b>권장</b>: 분기 조건은 늘 비교식(<code>x is at least 1</code>)으로, <code>Ensure</code>로 전제조건을 명시하세요.</li>
  </ul>
</section>

<section>
  <h3>9) 스타일 가이드 — 가독성과 개성의 타협</h3>
  <ul>
    <li><b>한 줄 한 생각</b>: 문장은 짧게, 설명은 주석(<code>//</code>)으로.</li>
    <li><b>들여쓰기</b>: 필수 규칙은 아니지만 2칸을 권장합니다.</li>
    <li><b>이름</b>: 동사는 키워드에 맡기고, 변수는 <code>hp, mana, heroName</code>처럼 명사/속성으로.</li>
    <li><b>문장 리듬</b>: 한국어 설명 + 영어 키워드 + <code>ok?</code>의 맺음으로 “읽히는 맛”을 살리세요.</li>
  </ul>
</section>

<section>
  <h3>10) 앞으로의 길</h3>
  <p>다음 단계에서 추가될 문법(예고):</p>
  <ul>
    <li><b>함수</b>: <code>inscribe/invoke/bestow</code></li>
    <li><b>선택</b>: <code>choose upon</code> (스위치/매치)</li>
    <li><b>유틸</b>: <code>measure/transmute/trace</code></li>
    <li><b>보간 확장</b>: 문자열 보간에서 <i>표현식</i> 지원</li>
  </ul>
</section>
</div>
            </div> <div class="resizer" id="resizer"></div>
            <div class="main-content">
                <div class="editor-container">
                    <div class="tabs">
                        <div class="tab active">
                            <i class="ri-braces-line"></i> main.arcana <i class="ri-close-line"></i>
                        </div>
                    </div>
                    <div class="editor-wrapper">
                        <div id="line-numbers"></div>
                        <pre id="highlighting-area"><code class="language-arcana"></code></pre>
                        <textarea id="codeInput" class="editing-area" spellcheck="false"></textarea>
                    </div>
                </div>
                <div class="console-container">
                    <div class="console-header">
                        <span>OUTPUT</span>
                        <div class="console-actions">
                            <i class="ri-delete-bin-line" id="clear-console-btn" title="Clear Console"></i>
                        </div>
                    </div>
                    <pre id="outputConsole"></pre>
                </div>
            </div>
        </main>
        
        <footer>
            <div class="status-left">
                <i class="ri-check-double-line"></i>
                <span id="status-message">Ready</span>
            </div>
            <div class="status-right">
                <span>Arcana Language</span>
                <i class="ri-git-branch-line"></i>
                <span>main</span>
            </div>
        </footer>
    </div>
    <script type="module" src="./ide.js"></script>
</body>
</html>