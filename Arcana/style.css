/* ==== Arcana IDE – style.css ==== */

/* ==== THEME ==== */
:root{
  --bg: #272b33;
  --panel: #22262d;
  --text: #cfd7e3;
  --muted: #8a93a2;
  --accent: #83a0ff;
  --accent-2: #c488ff;
  --green: #8cd7a5;
  --red: #ff6b6b;
  --yellow: #ffd27d;
  --blue: #7fb8ff;

  /* Editor metrics */
  --editor-font: ui-monospace, SFMono-Regular, Menlo, Consolas, "Liberation Mono", monospace;
  --editor-size: 14px;
  --editor-line: 22px;       /* 정수 px → 반칸 어긋남 방지 */
  --editor-pad-y: 8px;

  /* Console height */
  --console-height: 220px;

  /* Sidebar */
  --sidebar-width: 360px;
}

/* ==== LAYOUT ==== */
body{
  margin:0;
  background:#1e2228;
  color:var(--text);
  font-family:Inter, system-ui, -apple-system, Segoe UI, Roboto, Arial, sans-serif;
}

.ide-container{
  height: 100vh;              /* 콘솔이 항상 보이도록 */
  min-height: 100vh;
  display:flex;
  flex-direction:column;
}

.workspace{
  flex:1;
  display:flex;
  min-height:0;
}

.activity-bar{
  width:48px;
  background:#1c2026;
  display:flex;
  flex-direction:column;
  align-items:center;
  gap:14px;
  padding:10px 0;
}
.activity-bar .action-icon{ color:var(--muted); cursor:pointer; }
.activity-bar .action-icon.active{ color:var(--text); }

/* === Resizable Sidebar === */
.sidebar{
  flex: 0 0 var(--sidebar-width);
  width: var(--sidebar-width);
  min-width: 220px;
  max-width: 720px;
  background:#20242b;
  color:var(--text);
  overflow:auto;
  border-right:1px solid #2d323a;
}
.sidebar-header{
  padding:16px 20px;
  letter-spacing:.08em;
  color:#8a93a2;
  border-bottom:1px solid #313640;
  font-weight:600;
}
.language-guide{ padding:20px; line-height:1.7; }
.language-guide h2, .language-guide h3{ margin:18px 0 8px; }
.language-guide pre{ background:#1f232a; padding:10px 12px; border-radius:8px; overflow:auto; }

/* 사이드바와 에디터 사이 드래그바 */
.resizer{
  flex: 0 0 6px;
  background:#2d323a;
  cursor: col-resize;
  position: relative;
  touch-action: none;
}
.resizer::after{
  content:"";
  position:absolute; top:0; bottom:0; left:2px; width:2px;
  background:rgba(255,255,255,0.08); border-radius:1px;
}
.resizer:hover{ background:#333a46; }
.resizer.dragging{ background:#3a4250; }

.main-content{
  flex:1;
  display:flex;
  flex-direction:column;
  min-width:0;
}

.editor-container{
  flex:1 1 auto;
  min-height:0;
  display:flex;
  flex-direction:column;
  background:var(--bg);
}

.tabs{
  height:36px;
  display:flex;
  align-items:center;
  gap:8px;
  padding:0 12px;
  border-bottom:1px solid #2f3540;
  color:var(--muted);
}
.tab.active{ color:var(--text); }

.editor-wrapper{
  position:relative;
  flex:1;
  min-height:0;
  overflow:hidden;           /* 스크롤 주체는 textarea */
  background:var(--bg);
}

/* ==== EDITOR CORE ==== */

/* 라인넘버(Gutter) */
#line-numbers{
  position:absolute; top:0; left:0; bottom:0;
  min-width:2.8ch;
  padding: var(--editor-pad-y) 10px;
  margin:0;
  text-align:right;
  white-space:pre;
  box-sizing:border-box;
  color:#697385;
  font-family: var(--editor-font);
  font-size: var(--editor-size);
  line-height: var(--editor-line);
  pointer-events:none;
  will-change: transform;
  z-index: 3;
}

/* 하이라이트 오버레이 (스크롤 금지, 포인터 무시) */
#highlighting-area{
  position:absolute; inset:0;
  background:transparent;
  margin:0;
  overflow:hidden;            /* 절대 스크롤 금지 */
  pointer-events:none; user-select:none;
  color:transparent;          /* 실제 색은 code에서 */
  z-index: 1;                 /* 입력창 아래로 */
}
#highlighting-area code{
  display:block;
  white-space:pre;
  font-family: var(--editor-font);
  font-size: var(--editor-size);
  line-height: var(--editor-line);
  padding-top: var(--editor-pad-y);
  padding-bottom: var(--editor-pad-y);
  color:var(--text);
}

/* 실제 입력창: 스크롤 주체 (최상위 z-index) */
#codeInput.editing-area{
  position:absolute; inset:0;
  box-sizing:border-box;
  background:transparent;
  color:transparent;              /* 하이라이트만 보이게 */
  -webkit-text-fill-color: transparent; /* Safari */
  caret-color:#e6eefc;
  border:0;
  resize:none;
  white-space:pre;
  overflow:auto;
  font-family: var(--editor-font);
  font-size: var(--editor-size);
  line-height: var(--editor-line);
  padding-top: var(--editor-pad-y);
  padding-bottom: var(--editor-pad-y);
  z-index: 2;                     /* 오버레이 위 */
}

/* 콘솔 */
.console-container{
  flex: 0 0 var(--console-height);
  height: var(--console-height);
  max-height: var(--console-height);
  overflow: auto;
  background:#1f232a;
  border-top:1px solid #2f3540;
}
.console-header{
  height:32px;
  display:flex;
  align-items:center;
  justify-content:space-between;
  padding:0 10px;
  color:var(--muted);
  border-bottom:1px solid #2c313b;
}
#outputConsole{
  margin:0;
  padding:12px 14px;
  min-height:80px;
  white-space:pre-wrap;
  color:var(--text);
}

/* 상태바 */
footer{
  height:28px;
  display:flex;
  align-items:center;
  justify-content:space-between;
  padding:0 10px;
  color:#95a0b3;
  background:#1b1f25;
  border-top:1px solid #2c313b;
}
.status-left i{ margin-right:6px; }

/* ==== SYNTAX COLORS ==== */
.tok-keyword{   color: var(--accent-2); font-weight:600; }
.tok-variable{  color: var(--yellow);   font-weight:600; }
.tok-number{    color: var(--blue); }
.tok-string{    color: var(--green); }
.tok-identifier{color: #b8c0cf; }
.tok-operator{  color: #8994a8; }
.tok-comment{   color: #627089; font-style:italic; }

/* 코드 스니펫(가이드) 클릭 */
.code-snippet{ cursor:pointer; }
.code-snippet:hover{ outline:1px dashed #394150; }

/* 에디터 텍스트를 라인넘버 오른쪽으로 밀어주기 */
#highlighting-area code,
#codeInput.editing-area{
  padding-left: calc(2.8ch + 20px); /* line-numbers min-width(2.8ch) + 좌/우 패딩(10px*2에서 좌측만 10px) 보정 */
}\n\n/* === Arcana Highlight Palette (role-based) === */
#highlighting-area code.language-arcana { color: #9aa0a6; font-weight: 400; }

.tok-string   { color: #C3E88D; font-weight: 600; } /* strings */
.tok-number   { color: #89DDFF; font-weight: 500; } /* numbers */
.tok-comment  { color: #5F6A72; font-style: italic; } /* comments */
.tok-function { color: #F78C6C; font-weight: 600; } /* foo( */
.tok-vardecl  { color: #FFD166; font-weight: 600; } /* alpha is ... */

/* Keyword categories */
.tok-keyword-flow    { color: #B39DDB; font-weight: 600; } /* control flow */
.tok-keyword-logic   { color: #F06292; font-weight: 600; } /* boolean logic */
.tok-keyword-compare { color: #42A5F5; font-weight: 600; } /* is / comparisons */
.tok-keyword-core    { color: #FFB74D; font-weight: 600; } /* core data ops */
.tok-keyword-list    { color: #3F51B5; font-weight: 600; } /* list/sort */
.tok-keyword-time    { color: #9575CD; font-weight: 600; } /* time */
.tok-keyword-random  { color: #AB47BC; font-weight: 600; } /* randomness */
.tok-keyword-math    { color: #F48FB1; font-weight: 600; } /* math/transform */\n

/* === 기본 코드 톤: 더 진한 회색으로 조정 === */
#highlighting-area code.language-arcana {
  color: #8B949E;   /* 기존 #9aa0a6보다 진함 */
  font-weight: 400;
}

/* 문자열/숫자/주석/함수/선언 변수 */
.tok-string   { color: #9abe64ff; font-weight: 600; }
.tok-number   { color: #89DDFF; font-weight: 500; }
.tok-comment  { color: #5F6A72; font-style: italic; }
.tok-function { color: #F78C6C; font-weight: 600; }
.tok-vardecl  { color: #FFD166; font-weight: 600; }

/* 역할별 키워드 팔레트 (민트 사용 안 함) */
.tok-keyword-flow    { color: #B39DDB; font-weight: 600; } /* 제어 흐름 */
.tok-keyword-logic   { color: #F06292; font-weight: 600; } /* 논리 */
.tok-keyword-compare { color: #42A5F5; font-weight: 600; } /* is/비교 */
.tok-keyword-core    { color: #FFB74D; font-weight: 600; } /* 핵심 가공 */
.tok-keyword-list    { color: #3F51B5; font-weight: 600; } /* 정렬/리스트 */
.tok-keyword-time    { color: #9575CD; font-weight: 600; } /* 시간 */
.tok-keyword-random  { color: #AB47BC; font-weight: 600; } /* 확률 */
.tok-keyword-math    { color: #F48FB1; font-weight: 600; } /* 수학/변환 */

/* 기본 텍스트 톤을 더 진한 회색으로 고정 */
#highlighting-area code.language-arcana {
  color: #adb3bbff;    /* 기존 #b8c0cf보다 어둡고, 흰색 느낌 제거 */
  font-weight: 400;
}

/* 식별자(일반 토큰)는 기본색을 그대로 따르도록(= 사실상 비활성화) */
.tok-identifier {
  color: inherit !important;
  font-weight: inherit !important;
}

/* === VS Code Dark+ 톤으로 정리 === */
/* 기본 텍스트(미토큰) */
#highlighting-area code.language-arcana {
  color: #D4D4D4;           /* VS Code editor.foreground */
  font-weight: 400;
}

/* 키워드: 카테고리 전부 한 색으로 수렴 */
.tok-keyword,
[class^="tok-keyword-"] {
  color: #C586C0;           /* Dark+ keyword */
  font-weight: 600;         /* VS Code는 보통 normal이지만, 가독성 위해 약굵 유지 */
}

/* 선언 변수명: X is ... 의 X */
.tok-vardecl  { color: #9CDCFE; font-weight: 600; }  /* Dark+ variable/parameter */

/* 함수 이름: 식별자 직후 '(' */
.tok-function { color: #DCDCAA; font-weight: 600; }  /* Dark+ function */

/* 문자열 */
.tok-string   { color: #CE9178; font-weight: 600; }  /* Dark+ string (요청대로 굵게 유지) */

/* 숫자 */
.tok-number   { color: #B5CEA8; }                     /* Dark+ number */

/* 주석 */
.tok-comment  { color: #6A9955; font-style: italic; } /* Dark+ comment */

/* 연산자/구두점: 과한 색 배제 */
.tok-operator, .tok-punct { color: #D4D4D4; }

/* 과거 규칙의 과한 영향 제거 */
.tok-variable, .tok-identifier {
  color: inherit !important;
  font-weight: inherit !important;
}

.tok-identifier { color: inherit !important; font-weight: inherit !important; }
.tok-function { color: #DCDCAA; font-weight: 600; }
